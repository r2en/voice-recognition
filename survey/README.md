# 音声解析R&D

音声認識とは人間の声をコンピュータに認識させる技術、
もしくは音声の特徴から人間を特定する技術(別名:話者認識)
<br>

## 認識技術
- 現在主流なのが統計的手法。
    1.大量の発話を記録した学習用データから音声の特徴を蓄積
    2.認識対象となる入力音声から抽出された特徴と1.の比較
    3.最も近い言語系列を認識結果として出力
<br>
特徴は2種類存在する
- (1)音響モデル
    - 音響的な特徴、認識対象の音素がそれぞれどのような周波数特性を持っているのかを表すもの
    - 混合正規分布を出力確率とした隠れマルコフモデルが使われる
- (2)言語モデル
    - 音素の並びに関する制約を表したもの
    - [ex.] 「あなた(a n a t a)」という発生の直後には「が(g a)」や「は(w a)」などの発生が続く確率が高い、等の制約
    認識対象の言語の規模によって手法が異なる
        - 1.n-gram:大規模の場合 [ex.パソコン上での文書作成]
        - 2.文脈自由法:小規模であり、人手で網羅できる程度[ex.カーナビの音声操作]

<br>
<br>

> ## 目的
> ### 01：医療用の音声解析&エビデンスログ
> 医療現場における看護師のエビデンスログ（患者対応レポート）を支援するためのツール。

>医療現場で看護師が日々の看護を行う中で、患者さんとのコミニュケーションで会話をした内容などをレポートとして提出する必要があります。現状は通常の看護作業の上に会話の内容をメモなどに取るなどしてレポートを作成する形になりますが、音声解析技術を使用することで、患者さんとの会話内容を自動で入力および解析し、レポートに落とし込むソリューションツール開発を目的とします。

#### 課題
- 基本的にAPI等では個人レベルでの使用を想定しているため、対応する語彙が限られ業務用後はカバーされていない。
<br>

> ### 02：新入社員用議事ログサポートツール
> 新入社員の議事ログを音声解析によってサポートするツール。スマホアプリなどのマイク入力を利用し普段から行われている議事ログの音声解析してレポートを作成支援するツール。

#### 課題
- 基本的にAPI等では個人レベルでの使用を想定しているため、対応する語彙が限られ業務用後はカバーされていない。
- 複数の話者による発生や、音声認識向けと意識していない会議での発生は困難(単語を区切るなどをしなくてはならない)
<br>
<br>

## 競合他社
企業向けでは、大規模語彙と複数の不特定話者に台頭した会議などの議事録作りに使えるより高価なソフトも販売され、カセットテープやICレコーダの聞き起こしに比べ効率的に作業を行うことができる

- 医師向け電子カルテ入力システム
    - アドバンスト・メディア社
    読影レポートの作成。専門用語(医学用語)、日本語、英語等(和声読み)を認識
    - 単純Ｘ線/CT/MRI/血管造影/核医学の所見レポートの3万5000語辞書を保持

- 自治体向け議事録作成支援システム
    - アドバンスト・メディア社
    官公庁向けAmiVoice® 議事録作成支援システム

![image](https://cloud.githubusercontent.com/assets/17031124/25792480/c60becbe-3401-11e7-8ba3-5346a8d530b7.png)

- 議事録向けの音声認識ソフト
    - NEC VoiceGraphy

- 共通点として、どれも汎用性がない

<br>

## 研究中の技術
- MFT(Missing feature theory)
    - 話者の音声特徴が雑音や特徴分離処理によって歪むと音響モデルとの差が開いて誤認識の元になる。
    - 得た音声の特徴量に歪みや雑音がどの程度含まれているかを推定し、時間軸と周波数軸に対して信頼度をマップとして持たせる
    - 低信頼度の特徴量にはマスクをかけたり、失われた音声を復元する処理をすることができる

- GSS(Geometric source separaticn)
    - 複数の音源を分離する技術。音源源に相関がなければ複数のマイクからの入力情報によって音源分離とその位置情報(音源手定位)を得る
<br>
-> この二つの技術を使用すれば、騒音下や同時発話の状況でも認識率を落とさずに済む可能性がある

<br>
<br>

## 音声認識API 評価<br><br>

### 音声認識API比較
| iPhone | GoogleSpeechAPI | docomo<br>音声認識API | OpenEars | Julius| IBMBluemix | SpeechRec | AmiVoiceCloud| vGateASR | miniASR|SpeechFramework|
|:-----------|------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|
| 商用     | 不可(個人利用のみ) | 不可(個人) |可能(?)要確認 |可能|-|-|-|-|-|可能|
| 制限     | 50回/1日<br>10~15秒/1回 |-|-|-|-|-|動作制限有|-|-|アプリ・端末ごとにあり|
| ネット|オンライン|オンライン|オフライン|オフライン|オンライン|-|オン/オフライン(動作制限)|オン/オフライン|-|オンライン|
| 性能|速度80<br>精度80|速度80<br>精度60|速度100|-|-|速度80<br>精度70|-|-|速度90|速度80<br>精度80|
<br>
<br>

### 音声認識API調査<br>

#### 調査方法
- 「坊ちゃん」の冒頭部分の音声データを入力とし、認識結果を確認
- 使用する技術（API）によって、マイクからの入力 or 録音データファイルを入力

````rb
親譲りの無鉄砲で小供の時から損ばかりしている。小学校に居る時分学校の二階から飛び降りて一週間ほど腰を抜かした事がある
````
#### Google Speech API
- Chromium Dev groupに参加した開発者のみしか利用できない
- 動作させる為にWeb上のダッシュボードから登録が必要
- 内部処理としてwav、flacファイルを生成し送信する。

1回目

![image](https://cloud.githubusercontent.com/assets/28590220/25942953/39970884-3679-11e7-90a1-23f57cb54a9b.png)

2回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943017/7e5f0d72-3679-11e7-9b5d-7db53c81ecff.png)


#### Docomo音声認識API
- SpeechRecを内部で使用
- Android,iOS,Browser用にそれぞれSDKが用意
- 発話の句切れ目を自動で検知する
- 音声認識と自動検知平行実行不可
- [image]()

#### OpenEars
- 英語・スペイン語のみ
- 登録した単語と合致するかの判定を行う
- 音声でのコマンド実行に向く

#### Julius
- 可搬性(複数モデル・文法のカスタマイズ・Pythonライブラリ等)
- 研究ベースの為オープンソース PC・スマホ上可能 京都大学研究開発
- 辞書にない未知語は一切認識不可
- ユーザのくせを学習
- 話者適応は未対応

#### IBM Bluemix
- 有償 処理時間に応じ課金
- watsonと会話等他機能連動

#### SpeechRec
- 有償 詳しい日本語マニュアル
- docomo音声認識APIの内部

#### AmiVoiceCloud
- iOS SDK有

#### vGateASR
- 製品情報は問い合わせ
- オン/オフラインにiOSミドルウェア装備

#### miniASR
- 製品情報は問い合わせ
- でも動画では非常に高速な認識
#### SpeechFramework
- Apple純正
- 58言語対応
- 録音・リアルタイム両音声対応

1回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943230/311050f2-367a-11e7-9905-8c3b5fd145e2.png)

2回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943251/4177ee82-367a-11e7-8a9d-9b7686524352.png)




#### Web Speech API
- Chromeの[WebKitSpeechREcognition](https://developers.google.com/web/updates/2013/01/Voice-Driven-Web-Apps-Introduction-to-the-Web-Speech-API) APIを使用
- (確認にはWebSPeechAPIのラッパーな[annyang](https://www.talater.com/annyang/)というJSライブラリ使用)
- 認識率低い
- 発話の最初の精度が特に悪い
- 入力音声データの加工不可

![image](https://cloud.githubusercontent.com/assets/28590220/25943082/ac6011e4-3679-11e7-867c-dab0f51eaf53.png)


#### 音声認識API by Advanced Media
- Google Speech APIを内部使用(入力音声データ) 
- 精度 Advanced < Google API
- 音声データをREST形式で送信し認識する
- APIを利用したアプリケーションの商用利用の際に、提供携帯問わず有償契約必要
- 10秒超えるデータは切られる

1回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943141/deb0b7ac-3679-11e7-8bc0-151016b66df1.png)

2回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943179/004f562a-367a-11e7-9eaa-c8d139da0e58.png)

#### Googleドキュメント

1回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943301/6aeaaf7a-367a-11e7-831b-1de981fbb5f4.png)

2回目

![image](https://cloud.githubusercontent.com/assets/28590220/25943329/7a409bc4-367a-11e7-86be-83e8644ef490.png)



<br>

## 音声認識ソフト 評価<br>

### 音声認識ソフト 比較
| 順位 | 音声学習<br>知識辞書<br>登録前 | 音声学習<br>知識辞書<br>登録後 | 実用性 | 専門性 | 文字起こし速度 |音声入力コマンド | 学習機能 | 総合評価 | 
|:-----------|------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|:------------:|
| 1位 | Google | AmiVoice |iOS |AmiVoice|iOS| AmiVoice | AmiVoice|AmiVoice|
| 2位 | Dragon Dictation |Windows|AmiVoice|-|Google|iOS|Windows|Windows|
| 3位 |iOS|Google|Windows|-|Dragon Dictation|(2位)Dragon Dictation|-|iOS|
| 4位 |AmiVoice|Dragon Dictation|Dragon Dictation|-|Windows|(2位)Windows|-|Dragon Dictation|
| 5位 |(4位)Windows|iOS|Google|-|AmiVoice |Google|-|Google
| 特徴 |サーバ上に辞書を持ってる.アプリ系音声認識が認識率高め|辞書登録を行うとPC系音声認識が高め|長文を書く場合の想定|法律・医学の専門知識辞保有|PC系音声認識が低め<br>PCスペック依存?|有料カスタマイズが上位|無料の音声認識には学習機能はないパソコン版のみ|機能多様なPC優勢|

<br>

### 音声認識ソフト総評<br>

#### Googleドキュメント
- スマホ
- 認識率がかなり高い
- 日本語版音声入力コマンドが対応されてない
#### iOS
- スマホ
- Googleドキュメントより認識率低いが、高い方
- 句読点や改行を音声入力コマンドで操作可能
#### Dragon Dictation
- スマホ
- DragonSpeech(PC用音声認識)の会社のiPhone用アプリ
- 認識率はGoogleドキュメント並
- ソーシャルへの短文操作なら使える
#### Windows
- PC
- セットアップやトレーニングすると認識精度があがる
#### AmiVoice
- PC
- 拡張性が高い
<br>

